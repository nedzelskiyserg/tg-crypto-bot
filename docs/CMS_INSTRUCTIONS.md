# Инструкция по работе с CMS системой

## Быстрый старт

### 1. Установите зависимости
```bash
pip3 install -r requirements.txt
```

### 2. Создайте файл меню
```bash
python3 create_example_menu.py
```
Это создаст файл `menu.xlsx` с примером структуры.

### 3. Отредактируйте меню
Откройте `menu.xlsx` в Excel/LibreOffice и отредактируйте данные под ваши нужды.

### 4. Запустите бота
```bash
python3 main.py
```

## Структура XLSX файла

### Обязательные столбцы:

1. **ID** - Уникальный идентификатор (текст или число)
2. **Название** - Текст кнопки
3. **Родитель ID** - ID родителя (пусто для корневых элементов)
4. **Тип** - `button` (категория) или `message` (сообщение)
5. **Текст** - Содержимое (обязательно для типа `message`)
6. **Callback Data** - (опционально, генерируется автоматически)
7. **Порядок** - Число для сортировки (0, 1, 2, ...)

### Правила заполнения:

- ✅ ID должны быть уникальными
- ✅ Родитель ID должен ссылаться на существующий ID
- ✅ Для типа `message` обязательно заполните "Текст"
- ✅ Для типа `button` поле "Текст" может быть пустым
- ✅ Порядок определяет последовательность отображения

## Примеры

### Пример 1: Простое меню

| ID | Название | Родитель ID | Тип | Текст | Callback Data | Порядок |
|----|----------|-------------|-----|-------|---------------|---------|
| 1 | Главная | | button | | | 1 |
| 2 | О нас | 1 | message | Мы лучшие! | | 1 |

### Пример 2: Иерархическое меню

| ID | Название | Родитель ID | Тип | Текст | Callback Data | Порядок |
|----|----------|-------------|-----|-------|---------------|---------|
| 1 | Услуги | | button | | | 1 |
| 2 | Обмен | 1 | button | | | 1 |
| 3 | Купить | 2 | message | Информация о покупке... | | 1 |
| 4 | Продать | 2 | message | Информация о продаже... | | 2 |

## Обновление меню

1. Отредактируйте `menu.xlsx`
2. Сохраните файл
3. Перезапустите бота:
   ```bash
   ./stop_bot.sh
   python3 main.py
   ```

## Настройка пути к файлу

В файле `.env` можно указать другой путь:
```
MENU_FILE=путь/к/вашему/menu.xlsx
```
