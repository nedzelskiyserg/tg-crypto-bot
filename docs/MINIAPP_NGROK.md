# –ó–∞–ø—É—Å–∫ Mini App —á–µ—Ä–µ–∑ ngrok

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

```bash
./scripts/start_miniapp_ngrok.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–µ—Ä Mini App –Ω–∞ –ø–æ—Ä—Ç—É 8080
2. –ó–∞–ø—É—Å—Ç–∏—Ç ngrok —Ç—É–Ω–Ω–µ–ª—å
3. –ü–æ–∫–∞–∂–µ—Ç HTTPS URL –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ BotFather

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä Mini App:**
   ```bash
   python3 -m miniapp.server
   ```
   –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8080`

2. **–í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ ngrok:**
   ```bash
   ngrok http 8080
   ```

3. **–ü–æ–ª—É—á–∏—Ç–µ HTTPS URL:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ngrok: http://localhost:4040
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API: `curl http://localhost:4040/api/tunnels`
   - –ù–∞–π–¥–∏—Ç–µ URL –≤–∏–¥–∞ `https://xxxx-xx-xx-xx-xx.ngrok-free.app`

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL –≤ BotFather:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
   - –ö–æ–º–∞–Ω–¥–∞ `/newapp` –∏–ª–∏ `/editapp`
   - –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π HTTPS URL

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
./scripts/stop_miniapp.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
pkill -f "miniapp.server"
pkill -f "ngrok http"
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- ngrok (—É—Å—Ç–∞–Ω–æ–≤–∫–∞: `brew install ngrok/ngrok/ngrok`)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π ngrok:**
   - URL –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ç—Ä–∞—Ñ–∏–∫—É
   - –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ–º–µ–Ω

2. **HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω:**
   - Telegram —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è Mini App
   - ngrok –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTPS

3. **–ü–æ—Ä—Ç 8080:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
   - –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `miniapp/server.py`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–º–µ–Ω–∞ (ngrok Pro)

–ï—Å–ª–∏ —É –≤–∞—Å ngrok Pro —Å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –¥–æ–º–µ–Ω–æ–º:

```bash
ngrok http 8080 --domain=your-domain.ngrok.app
```
