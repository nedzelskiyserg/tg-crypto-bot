# Telegram –±–æ—Ç Mosca

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è –æ–±–º–µ–Ω–∞ USDT –≤ –ú–æ—Å–∫–≤–µ.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞:
```
BOT_TOKEN=your_bot_token_here
```

–¢–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather) –≤ Telegram.

## –ó–∞–ø—É—Å–∫

```bash
python3 main.py
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:
```bash
./stop_bot.sh
```

–ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç.

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ç–æ—Ä–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ Mosca –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –º–µ–Ω—é
- üìã **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é –∏–∑ CMS** - –º–µ–Ω—é —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ `menu.xlsx`
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–º—É –º–µ–Ω—é
- üìÑ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ CMS

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ cms.py               # –ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CMS (–ø–∞—Ä—Å–∏–Ω–≥ XLSX)
‚îú‚îÄ‚îÄ keyboards.py         # –ú–æ–¥—É–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä –º–µ–Ω—é
‚îú‚îÄ‚îÄ menu.xlsx            # –§–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ –º–µ–Ω—é (CMS)
‚îú‚îÄ‚îÄ create_example_menu.py # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–º–µ—Ä–∞ menu.xlsx
‚îú‚îÄ‚îÄ .env                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω –±–æ—Ç–∞)
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .gitignore          # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Git
‚îú‚îÄ‚îÄ stop_bot.sh         # –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `aiogram` –≤–µ—Ä—Å–∏–∏ 3.x –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ webhook –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º (–∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å Telegram API)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ graceful shutdown
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–û—à–∏–±–∫–∞ "Conflict: terminated by other getUpdates request"**
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã: `./stop_bot.sh`
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∑–∞–Ω–æ–≤–æ: `python3 main.py`

## –°–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –º–µ–Ω—é (CMS)

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ XLSX —Ñ–∞–π–ª–æ–≤. –ú–µ–Ω—é —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ `menu.xlsx`.

### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –º–µ–Ω—é

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞:**
   ```bash
   python3 create_example_menu.py
   ```
   –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `menu.xlsx` —Å –ø—Ä–∏–º–µ—Ä–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–µ–Ω—é.

2. **–†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   –û—Ç–∫—Ä–æ–π—Ç–µ `menu.xlsx` –≤ Excel –∏–ª–∏ LibreOffice –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ menu.xlsx

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã:

| –°—Ç–æ–ª–±–µ—Ü | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| **ID** | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é | `1`, `2`, `3` |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –¢–µ–∫—Å—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –Ω–∞ –∫–Ω–æ–ø–∫–µ | `–û–±–º–µ–Ω –≤–∞–ª—é—Ç`, `–ö—É–ø–∏—Ç—å USDT` |
| **–†–æ–¥–∏—Ç–µ–ª—å ID** | ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (–ø—É—Å—Ç–æ –¥–ª—è –∫–æ—Ä–Ω–µ–≤—ã—Ö) | `1`, `2` –∏–ª–∏ –ø—É—Å—Ç–æ |
| **–¢–∏–ø** | `button` (–∫–∞—Ç–µ–≥–æ—Ä–∏—è) –∏–ª–∏ `message` (—Å–æ–æ–±—â–µ–Ω–∏–µ) | `button`, `message` |
| **–¢–µ–∫—Å—Ç** | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–¥–ª—è —Ç–∏–ø–∞ `message`) | `–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—É–ø–∫–µ...` |
| **Callback Data** | (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `menu_<ID>` | `menu_1` |
| **–ü–æ—Ä—è–¥–æ–∫** | –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (0, 1, 2, ...) | `1`, `2`, `3` |

### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–µ–Ω—é

```
–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îú‚îÄ‚îÄ –û–±–º–µ–Ω –≤–∞–ª—é—Ç (button)
‚îÇ   ‚îú‚îÄ‚îÄ –ö—É–ø–∏—Ç—å USDT (button)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—É–ø–∫–µ (message)
‚îÇ   ‚îî‚îÄ‚îÄ –ü—Ä–æ–¥–∞—Ç—å USDT (button)
‚îÇ       ‚îî‚îÄ‚îÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–∂–µ (message)
‚îú‚îÄ‚îÄ –û –Ω–∞—Å (button)
‚îÇ   ‚îú‚îÄ‚îÄ –ö–æ–Ω—Ç–∞–∫—Ç—ã (message)
‚îÇ   ‚îî‚îÄ‚îÄ –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç (message)
‚îî‚îÄ‚îÄ –ü–æ–º–æ—â—å (button)
    ‚îú‚îÄ‚îÄ –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (message)
    ‚îî‚îÄ‚îÄ –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏ (message)
```

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `menu.xlsx`
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:
   ```bash
   ./stop_bot.sh
   python3 main.py
   ```

**–í–∞–∂–Ω–æ:** 
- ID –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏
- –†–æ–¥–∏—Ç–µ–ª—å ID –¥–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ID
- –¢–∏–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ `button`, –ª–∏–±–æ `message`
- –î–ª—è —Ç–∏–ø–∞ `message` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ "–¢–µ–∫—Å—Ç"

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É –º–µ–Ω—é

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç –∏—â–µ—Ç —Ñ–∞–π–ª `menu.xlsx` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

–ß—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å, –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```
MENU_FILE=–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/menu.xlsx
```
