<!-- Admin Panel Page Template -->
<div class="page page-admin" id="pageAdmin">
    <!-- Top Header -->
    <div class="top-header" id="adminTopHeader">АДМИН ПАНЕЛЬ</div>

    <!-- Admin Content -->
    <main class="admin-content">
        <!-- Admin Tabs -->
        <div class="admin-tabs">
            <button class="admin-tab active" data-admin-tab="rates">
                <span>КУРС</span>
            </button>
            <button class="admin-tab" data-admin-tab="orders">
                <span>ЗАЯВКИ</span>
            </button>
        </div>

        <!-- Tab: Rate Settings -->
        <div class="admin-tab-content active" id="adminTabRates" data-tab="rates">
            <section class="admin-section">
                <div class="admin-section-header">
                    <div class="accent-bar"></div>
                    <span class="section-title">ФОРМУЛА КУРСА</span>
                </div>

                <!-- Current Rates Info: сверху Покупка, снизу Продажа; значения пишутся наоборот (по id) -->
                <div class="admin-rates-info">
                    <div class="admin-rate-row">
                        <span class="admin-rate-label">API курс (покупка)</span>
                        <span class="admin-rate-value" id="adminRawSell">—</span>
                    </div>
                    <div class="admin-rate-row">
                        <span class="admin-rate-label">API курс (продажа)</span>
                        <span class="admin-rate-value" id="adminRawBuy">—</span>
                    </div>
                </div>

                <!-- Markup Inputs -->
                <div class="admin-markup-form">
                    <div class="admin-input-group">
                        <label class="admin-input-label">Наценка покупки (%)</label>
                        <div class="admin-input-wrap">
                            <input type="number" step="0.01" id="adminBuyMarkup" class="admin-input" placeholder="0.00" />
                            <span class="admin-input-suffix">%</span>
                        </div>
                    </div>
                    <div class="admin-input-group">
                        <label class="admin-input-label">Наценка продажи (%)</label>
                        <div class="admin-input-wrap">
                            <input type="number" step="0.01" id="adminSellMarkup" class="admin-input" placeholder="0.00" />
                            <span class="admin-input-suffix">%</span>
                        </div>
                    </div>
                </div>

                <!-- Final Rates Preview -->
                <div class="admin-final-rates">
                    <div class="admin-section-header">
                        <div class="accent-bar"></div>
                        <span class="section-title">ИТОГОВЫЙ КУРС</span>
                    </div>
                    <div class="admin-rates-info">
                        <div class="admin-rate-row">
                            <span class="admin-rate-label">Покупка</span>
                            <span class="admin-rate-value accent" id="adminFinalBuy">—</span>
                        </div>
                        <div class="admin-rate-row">
                            <span class="admin-rate-label">Продажа</span>
                            <span class="admin-rate-value accent" id="adminFinalSell">—</span>
                        </div>
                    </div>
                </div>

                <!-- Save Button -->
                <button class="admin-save-btn" id="adminSaveRates">
                    <span>СОХРАНИТЬ</span>
                </button>

                <!-- Last Updated Info -->
                <div class="admin-updated-info" id="adminUpdatedInfo" style="display: none;">
                    <span id="adminUpdatedText"></span>
                </div>
            </section>
        </div>

        <!-- Tab: Orders — View 1: Orders List -->
        <div class="admin-tab-content" id="adminTabOrders" data-tab="orders">
            <!-- View: Orders List -->
            <div class="admin-orders-view" id="adminOrdersListView">
                <section class="admin-section">
                    <!-- Header Row -->
                    <div class="admin-orders-header">
                        <div class="admin-orders-header-left">
                            <div class="accent-bar"></div>
                            <span class="section-title">ВСЕ ЗАЯВКИ</span>
                            <span class="admin-orders-total" id="adminOrdersTotal"></span>
                        </div>
                        <button class="admin-filter-toggle" id="adminOpenFilters">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"/></svg>
                            <span>Фильтры</span>
                            <span class="admin-filter-count" id="adminFilterCount" style="display:none;">0</span>
                        </button>
                    </div>

                    <!-- Active Filter Chips -->
                    <div class="admin-active-filters" id="adminActiveFilters" style="display:none;"></div>

                    <!-- Orders List -->
                    <div class="admin-orders-list" id="adminOrdersList"></div>

                    <!-- Pagination -->
                    <div class="admin-pagination" id="adminPagination" style="display: none;">
                        <button class="admin-page-btn" id="adminPrevPage">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                        </button>
                        <span class="admin-page-info" id="adminPageInfo">1 / 1</span>
                        <button class="admin-page-btn" id="adminNextPage">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        </button>
                    </div>

                    <!-- Empty State -->
                    <div class="admin-orders-empty" id="adminOrdersEmpty" style="display: none;">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--color-text-muted)" stroke-width="1.5" style="opacity:0.4;margin-bottom:8px;">
                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/>
                            <rect x="9" y="3" width="6" height="4" rx="1"/>
                            <path d="M9 14l2 2 4-4"/>
                        </svg>
                        <span class="empty-title">Нет заявок</span>
                        <span class="empty-desc">По выбранным фильтрам заявки не найдены</span>
                    </div>
                </section>
            </div>

            <!-- View: Filters Page -->
            <div class="admin-orders-view admin-filters-page" id="adminFiltersView">
                <section class="admin-section">
                    <!-- Filters Header -->
                    <div class="admin-filters-header">
                        <button class="admin-filters-back" id="adminFiltersBack">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                        </button>
                        <span class="admin-filters-title">ФИЛЬТРЫ</span>
                        <button class="admin-filters-reset-link" id="adminResetFilters">Сбросить</button>
                    </div>

                    <!-- Type Filter -->
                    <div class="admin-filter-group">
                        <label class="admin-filter-group-label">ТИП ОПЕРАЦИИ</label>
                        <div class="admin-type-chips" id="adminTypeChips">
                            <button class="admin-status-chip" data-type="buy">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
                                Покупка
                            </button>
                            <button class="admin-status-chip" data-type="sell">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
                                Продажа
                            </button>
                        </div>
                    </div>

                    <!-- Status Filter -->
                    <div class="admin-filter-group">
                        <label class="admin-filter-group-label">СТАТУС</label>
                        <div class="admin-status-chips" id="adminStatusChips">
                            <button class="admin-status-chip" data-status="pending">
                                <span class="admin-status-dot dot-pending"></span>
                                В обработке
                            </button>
                            <button class="admin-status-chip" data-status="confirmed">
                                <span class="admin-status-dot dot-confirmed"></span>
                                Подтверждено
                            </button>
                            <button class="admin-status-chip" data-status="rejected">
                                <span class="admin-status-dot dot-rejected"></span>
                                Отклонено
                            </button>
                            <button class="admin-status-chip" data-status="cancelled">
                                <span class="admin-status-dot dot-cancelled"></span>
                                Отменено
                            </button>
                        </div>
                    </div>

                    <!-- Order ID Filter -->
                    <div class="admin-filter-group">
                        <label class="admin-filter-group-label"># ЗАЯВКИ</label>
                        <div class="admin-amount-field" style="max-width:180px;">
                            <span class="admin-amount-currency" style="margin-left:0;margin-right:6px;">#</span>
                            <input type="number" id="adminFilterOrderId" class="admin-amount-input" placeholder="# заявки" inputmode="numeric" />
                        </div>
                    </div>

                    <!-- Period Filter -->
                    <div class="admin-filter-group">
                        <label class="admin-filter-group-label">ПЕРИОД</label>
                        <div class="admin-period-presets" id="adminPeriodPresets">
                            <button class="admin-period-btn active" data-period="all">Все время</button>
                            <button class="admin-period-btn" data-period="today">Сегодня</button>
                            <button class="admin-period-btn" data-period="week">Неделя</button>
                            <button class="admin-period-btn" data-period="month">Месяц</button>
                        </div>
                        <div class="admin-period-custom" id="adminPeriodCustom">
                            <div class="admin-date-field">
                                <label class="admin-date-label">От</label>
                                <input type="date" id="adminFilterDateFrom" class="admin-date-input" />
                            </div>
                            <div class="admin-date-field">
                                <label class="admin-date-label">До</label>
                                <input type="date" id="adminFilterDateTo" class="admin-date-input" />
                            </div>
                        </div>
                    </div>

                    <!-- Amount Filter -->
                    <div class="admin-filter-group">
                        <label class="admin-filter-group-label">СУММА ЗАЯВКИ</label>
                        <div class="admin-amount-range">
                            <div class="admin-amount-field">
                                <input type="number" id="adminFilterAmountMin" class="admin-amount-input" placeholder="Мин" inputmode="numeric" />
                                <span class="admin-amount-currency">₽</span>
                            </div>
                            <span class="admin-amount-separator">—</span>
                            <div class="admin-amount-field">
                                <input type="number" id="adminFilterAmountMax" class="admin-amount-input" placeholder="Макс" inputmode="numeric" />
                                <span class="admin-amount-currency">₽</span>
                            </div>
                        </div>
                    </div>

                    <!-- Apply Button -->
                    <div class="admin-filters-footer">
                        <button class="admin-apply-filters-btn" id="adminApplyFilters">
                            <span>ПОКАЗАТЬ ЗАЯВКИ</span>
                        </button>
                    </div>
                </section>
            </div>
        </div>

        <!-- Order Detail Modal -->
        <div class="admin-modal" id="adminOrderModal">
            <div class="admin-modal-overlay" data-action="close-admin-modal"></div>
            <div class="admin-modal-content">
                <div class="admin-modal-drag-handle"></div>
                <div class="admin-modal-header">
                    <h3>Детали заявки</h3>
                    <button class="admin-modal-close" data-action="close-admin-modal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <div class="admin-modal-body">
                    <div class="admin-modal-status" id="adminModalStatus">
                        <span class="admin-detail-badge">—</span>
                    </div>

                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Тип операции</span>
                        <span class="admin-detail-value" id="adminModalType">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Сумма отправки</span>
                        <span class="admin-detail-value" id="adminModalSend">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Сумма получения</span>
                        <span class="admin-detail-value accent" id="adminModalReceive">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Курс</span>
                        <span class="admin-detail-value" id="adminModalRate">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Дата создания</span>
                        <span class="admin-detail-value" id="adminModalDate">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label"># заявки</span>
                        <span class="admin-detail-value mono" id="adminModalId">—</span>
                    </div>
                    <div class="admin-detail-row" id="adminModalWalletRow" style="display:none;">
                        <span class="admin-detail-label">Кошелёк TRC-20</span>
                        <span class="admin-detail-value mono" id="adminModalWallet"></span>
                    </div>
                    <div class="admin-detail-row" id="adminModalCardRow" style="display:none;">
                        <span class="admin-detail-label">Банковская карта</span>
                        <span class="admin-detail-value mono" id="adminModalCard"></span>
                    </div>

                    <div class="admin-detail-separator"></div>

                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Telegram ID</span>
                        <span class="admin-detail-value mono" id="adminModalTgId">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label">ФИО</span>
                        <span class="admin-detail-value" id="adminModalName">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Телефон</span>
                        <span class="admin-detail-value mono" id="adminModalPhone">—</span>
                    </div>
                    <div class="admin-detail-row">
                        <span class="admin-detail-label">Email</span>
                        <span class="admin-detail-value mono" id="adminModalEmail">—</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
