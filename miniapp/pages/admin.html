<!-- Admin Panel Page Template -->
<div class="page page-admin" id="pageAdmin">
    <!-- Top Header -->
    <div class="top-header" id="adminTopHeader">АДМИН ПАНЕЛЬ</div>

    <!-- Admin Content -->
    <main class="admin-content">
        <!-- Admin Tabs -->
        <div class="admin-tabs">
            <button class="admin-tab active" data-admin-tab="rates">
                <span>КУРС</span>
            </button>
            <button class="admin-tab" data-admin-tab="orders">
                <span>ЗАЯВКИ</span>
            </button>
        </div>

        <!-- Tab: Rate Settings -->
        <div class="admin-tab-content active" id="adminTabRates" data-tab="rates">
            <section class="admin-section">
                <div class="admin-section-header">
                    <div class="accent-bar"></div>
                    <span class="section-title">ФОРМУЛА КУРСА</span>
                </div>

                <!-- Current Rates Info: сверху Покупка, снизу Продажа; значения пишутся наоборот (по id) -->
                <div class="admin-rates-info">
                    <div class="admin-rate-row">
                        <span class="admin-rate-label">API курс (покупка)</span>
                        <span class="admin-rate-value" id="adminRawSell">—</span>
                    </div>
                    <div class="admin-rate-row">
                        <span class="admin-rate-label">API курс (продажа)</span>
                        <span class="admin-rate-value" id="adminRawBuy">—</span>
                    </div>
                </div>

                <!-- Markup Inputs -->
                <div class="admin-markup-form">
                    <div class="admin-input-group">
                        <label class="admin-input-label">Наценка покупки (%)</label>
                        <div class="admin-input-wrap">
                            <input type="number" step="0.01" id="adminBuyMarkup" class="admin-input" placeholder="0.00" />
                            <span class="admin-input-suffix">%</span>
                        </div>
                    </div>
                    <div class="admin-input-group">
                        <label class="admin-input-label">Наценка продажи (%)</label>
                        <div class="admin-input-wrap">
                            <input type="number" step="0.01" id="adminSellMarkup" class="admin-input" placeholder="0.00" />
                            <span class="admin-input-suffix">%</span>
                        </div>
                    </div>
                </div>

                <!-- Final Rates Preview -->
                <div class="admin-final-rates">
                    <div class="admin-section-header">
                        <div class="accent-bar"></div>
                        <span class="section-title">ИТОГОВЫЙ КУРС</span>
                    </div>
                    <div class="admin-rates-info">
                        <div class="admin-rate-row">
                            <span class="admin-rate-label">Покупка</span>
                            <span class="admin-rate-value accent" id="adminFinalBuy">—</span>
                        </div>
                        <div class="admin-rate-row">
                            <span class="admin-rate-label">Продажа</span>
                            <span class="admin-rate-value accent" id="adminFinalSell">—</span>
                        </div>
                    </div>
                </div>

                <!-- Save Button -->
                <button class="admin-save-btn" id="adminSaveRates">
                    <span>СОХРАНИТЬ</span>
                </button>

                <!-- Last Updated Info -->
                <div class="admin-updated-info" id="adminUpdatedInfo" style="display: none;">
                    <span id="adminUpdatedText"></span>
                </div>
            </section>
        </div>

        <!-- Tab: Orders -->
        <div class="admin-tab-content" id="adminTabOrders" data-tab="orders">
            <section class="admin-section">
                <div class="admin-section-header admin-orders-header">
                    <div class="admin-orders-title-row">
                        <div class="accent-bar"></div>
                        <span class="section-title">ВСЕ ЗАЯВКИ</span>
                        <span class="admin-orders-total" id="adminOrdersTotal"></span>
                    </div>
                    <button type="button" class="admin-filters-open-btn" id="adminOpenFiltersBtn" aria-label="Открыть фильтры">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"/><circle cx="11" cy="12" r="2"/></svg>
                        <span>ФИЛЬТРЫ</span>
                    </button>
                </div>

                <!-- Active filters bar (chips + change/reset) -->
                <div class="admin-active-filters" id="adminActiveFiltersBar" style="display: none;">
                    <div class="admin-active-filters-chips" id="adminActiveFiltersChips"></div>
                    <div class="admin-active-filters-actions">
                        <button type="button" class="admin-active-filters-btn admin-active-filters-change" id="adminChangeFiltersBtn">Изменить</button>
                        <button type="button" class="admin-active-filters-btn admin-active-filters-clear" id="adminClearAllFiltersBtn">Сбросить всё</button>
                    </div>
                </div>

                <!-- Orders List -->
                <div class="admin-orders-list" id="adminOrdersList"></div>

                <!-- Pagination -->
                <div class="admin-pagination" id="adminPagination" style="display: none;">
                    <button class="admin-page-btn" id="adminPrevPage">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                    </button>
                    <span class="admin-page-info" id="adminPageInfo">1 / 1</span>
                    <button class="admin-page-btn" id="adminNextPage">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                </div>

                <!-- Empty State -->
                <div class="admin-orders-empty" id="adminOrdersEmpty" style="display: none;">
                    <span class="empty-title">Нет заявок</span>
                    <span class="empty-desc">По выбранным фильтрам заявки не найдены</span>
                </div>
            </section>
        </div>

        <!-- Filters page (full-screen, mobile-first) -->
        <div class="admin-filters-page" id="adminFiltersPage" aria-hidden="true">
            <div class="admin-filters-page-inner">
                <header class="admin-filters-header">
                    <h2 class="admin-filters-title">Фильтры заявок</h2>
                    <p class="admin-filters-desc">Настройте условия отбора заявок</p>
                </header>

                <form class="admin-filters-form" id="adminFiltersForm" novalidate>
                    <section class="admin-filters-group">
                        <h3 class="admin-filters-group-title">Статус и ID</h3>
                        <div class="admin-filters-field">
                            <label class="admin-filters-label" for="adminFilterStatus">Статус</label>
                            <select id="adminFilterStatus" class="admin-filters-select">
                                <option value="">Все статусы</option>
                                <option value="pending">В обработке</option>
                                <option value="confirmed">Подтверждено</option>
                                <option value="rejected">Отклонено</option>
                                <option value="cancelled">Отменено</option>
                            </select>
                        </div>
                        <div class="admin-filters-field">
                            <label class="admin-filters-label" for="adminFilterOrderId">ID заявки</label>
                            <input type="number" id="adminFilterOrderId" class="admin-filters-input" placeholder="Например: 42" min="1" inputmode="numeric" />
                        </div>
                    </section>

                    <section class="admin-filters-group">
                        <h3 class="admin-filters-group-title">Сумма (RUB)</h3>
                        <div class="admin-filters-row">
                            <div class="admin-filters-field admin-filters-field-half">
                                <label class="admin-filters-label" for="adminFilterAmountMin">От</label>
                                <input type="number" id="adminFilterAmountMin" class="admin-filters-input" placeholder="Мин" min="0" inputmode="numeric" />
                            </div>
                            <div class="admin-filters-field admin-filters-field-half">
                                <label class="admin-filters-label" for="adminFilterAmountMax">До</label>
                                <input type="number" id="adminFilterAmountMax" class="admin-filters-input" placeholder="Макс" min="0" inputmode="numeric" />
                            </div>
                        </div>
                    </section>

                    <section class="admin-filters-group">
                        <h3 class="admin-filters-group-title">Период</h3>
                        <div class="admin-filters-row">
                            <div class="admin-filters-field admin-filters-field-half">
                                <label class="admin-filters-label" for="adminFilterDateFrom">Дата от</label>
                                <input type="date" id="adminFilterDateFrom" class="admin-filters-input admin-filters-input-date" />
                            </div>
                            <div class="admin-filters-field admin-filters-field-half">
                                <label class="admin-filters-label" for="adminFilterDateTo">Дата до</label>
                                <input type="date" id="adminFilterDateTo" class="admin-filters-input admin-filters-input-date" />
                            </div>
                        </div>
                    </section>
                </form>

                <div class="admin-filters-page-actions">
                    <button type="button" class="admin-filters-apply-btn" id="adminFiltersApplyBtn">
                        <span>Применить</span>
                    </button>
                    <button type="button" class="admin-filters-reset-btn" id="adminFiltersResetBtn">
                        <span>Сбросить</span>
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>
